<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Redirecting</title>
	<noscript>
		<meta http-equiv="refresh" content="1; url=https://ui5.github.io/cli" />
	</noscript>
	<script>
		(function name(params) {
			"use strict";

			var url = new URL(window.location);
			var path = url.pathname.split("/");
			var pathRegex = /\/(v[0-9]+|stable|next)/gi

			// Check if URL contains a version pattern
			var hasVersion = url.pathname.match(pathRegex);

			if (!hasVersion) {
				// No version in URL - add stable
				// e.g., /ui5-tooling/ â†’ /ui5-tooling/stable/
				path.splice(2, 0, "stable");
			} else {
				// URL has a version but page doesn't exist
				// Find the version part and replace it with stable
				var versionIndex = path.findIndex((elem) => elem.match(/^(v[0-9]+|stable|next)$/));

				if (versionIndex > -1) {
					// Check if it's already trying to access stable
					if (path[versionIndex] === "stable") {
						// Already on stable and page not found - redirect to stable root
						path = path.slice(0, versionIndex + 1);
					} else {
						// Replace the version with "stable"
						path[versionIndex] = "stable";
						// Remove any path after the version to go to the root of stable
						path = path.slice(0, versionIndex + 1);
					}
				} else {
					// Edge case: redirect to the stable version
					path = ["", path[1], "stable"];
				}
			}

			url.pathname = path.join("/");

			// Prevent infinite loops by checking if we're redirecting to the same URL
			if (url.toString() !== window.location.toString()) {
				window.location = url.toString();
			}
		})()
	</script>
</head>

<body>
	Redirect to <a href="https://ui5.github.io/cli/stable/">the stable docs release</a>...
</body>

</html>
